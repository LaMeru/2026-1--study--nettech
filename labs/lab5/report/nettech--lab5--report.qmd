---
## Author
author:
  name: Чигладзе Майя Владиславовна
  degrees: student
  orcid: 0000-0002-0877-7063
  email: 1132239399@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 119530
      city: Москва
      address: ул. Очаковское шоссе, д. 9А

## Title
title: "Отчёт по лабораторной работе №5"
subtitle: "Cетевые технологии"
license: "CC BY"
---

# Цель работы

Построение простейших моделей сети на базе коммутатора и маршрутизато- ров FRR и VyOS в GNS3, анализ трафика посредством Wireshark.

# Задание

1. Построить в GNS3 топологию сети, состоящей из коммутатора Ethernet и двух оконечных устройств (персональных компьютеров).
2. Задать оконечным устройствам IP-адреса в сети 192.168.1.0/24. Проверить связь.

1.С помощью Wireshark захватить и проанализировать ARP-сообщения.

2.С помощью Wireshark захватить и проанализировать ICMP-сообщения.

1.Построить в GNS3 топологию сети, состоящей из маршрутизатора FRR, ком- мутатора Ethernet и оконечного устройства.

2.Задать оконечному устройству IP-адрес в сети 192.168.1.0/24.

3.Присвоить интерфейсу маршрутизатора адрес 192.168.1.1/24

4.Проверить связь.

1.Построить в GNS3 топологию сети, состоящей из маршрутизатора VyOS, ком- мутатора Ethernet и оконечного устройства.

2.Задать оконечному устройству IP-адрес в сети 192.168.1.0/24.

3.Присвоить интерфейсу маршрутизатора адрес 192.168.1.1/24

4.Проверить связь.

# Теоретическое введение

FRR — программный маршрутизатор с открытым исходным кодом.
Документация по настройке программного маршрутизатора FRR доступна на сайте https://docs.frrouting.org/.
Система команд в FRR похожа на систему команд, применяемую Cisco, поддер-
живает аббревиатуры для длинных команд и авто-заполнение/авто-подстановку с помощью клавиши Tab .
Для взаимодействия пользователя с демоном маршрутизации в FRR исполь-
зуется интерфейс командной строки (CLI) виртуального терминала (Virtual TeletYpe interface, VTY).
Три основных режима VTY:
–режим просмотра VTY (VTY View Mode) — предназначен для доступа к CLI только для чтения;
–режим включения VTY (VTY Enable Mode) — предназначен для чтения и запи- си в интерфейсе командной строки;
–другие режимы VTY (VTY Other Modes) — предназначен для описания других режимов.

# Выполнение лабораторной работы

## Моделирование простейшей сети на базе коммутатора в GNS3

1.Запустите GNS3 VM и GNS3. Создайте новый проект. (см. рис. @fig-011).

![Запустила программы](image/1.1.jpg){#fig-011 width=70%}

2.В рабочей области GNS3 разместите коммутатор Ethernet и два VPCS. Щёлкнув на устройстве правой кнопкой мыши выберете в меню Configure . Измените название устройства, включив в имя устройства имя учётной записи выполня-
ющего работу студента. Коммутатору присвойте название msk-user-sw-01, где вместо user укажите имя вашей учётной записи. Соедините VPCS с ком- мутатором. Отобразите обозначение интерфейсов соединения (см. рис. @fig-012).

![Разместила коммутаторы](image/1.2.jpg){#fig-012 width=70%}

3.Задайте IP-адреса VPCS. Для этого с помощью меню, вызываемого правой кнопкой мыши, запустите Start , например, PC-1, затем вызовите его терми-
нал Console . Для просмотра синтаксиса возможных для ввода команд набери- те /? (см. рис. @fig-013).

![Задала айпи адреса](image/1.3.jpg){#fig-013 width=70%}

4.Проверьте работоспособность соединения между PC-1 и PC-2 с помощью команды ping. 
(см. рис. @fig-014).

![Проверила работоспособность](image/1.4.jpg){#fig-014 width=70%}

5.Остановите в проекте все узлы (меню GNS3 Control	Stop all nodes ) ([рис. @fig-015]).

![Остановила все узлы](image/1.5.jpg){#fig-015 width=70%}

## Анализ трафика в GNS3 посредством Wireshark

1.Запустите на соединении между PC-1 и коммутатором анализатор трафика. Для этого щёлкните правой кнопкой мыши на соединении, выберете в меню Start capture , при необходимости можете скорректировать название
DUMP-файла. Запустится Wireshark, а в проекте GNS3 на соединении появится
значок лупы. ([рис. @fig-021]).

![Запустила анализ трафика](image/2.1.jpg){#fig-021 width=70%}

2.В проекте GNS3 стартуйте все узлы (меню GNS3 Control  Start/Resume all nodes ). В окне Wireshark отобразится информация по протоколу ARP. Про- анализируйте полученную информацию, дайте пояснения в отчёте. (см. рис. @fig-022).

![Стартовала все узлы1](image/2.2.jpg){#fig-022 width=70%}

3.В терминале PC-2 посмотрите информацию по опциям команды ping, введя ping /?. Затем сделайте один эхо-запрос в ICMP-моде к узлу PC-1. В окне Wireshark проанализируйте полученную информацию, дайте пояс- нения в отчёте. (см. рис. @fig-023).

Проверка ARP: Перед началом ICMP-обмена PC-2 (192.168.1.12) выполнил ARP-запрос, чтобы узнать MAC-адрес PC-1 (192.168.1.11), и получил ARP-ответ.

Проверка ICMP: Был зафиксирован успешный обмен ICMP-пакетами (запрос и ответ), что подтверждает наличие двусторонней сетевой связности между PC-2 и PC-1 на уровне IP.

Локальная сеть: Низкое время ответа (разница между строками 11 и 12) и высокое значение TTL (64) подтверждают, что оба устройства находятся в одной локальной сети и соединены напрямую через коммутатор.

![Посмотрела информацию](image/2.3.jpg){#fig-023 width=70%}

4.Сделайте один эхо-запрос в UDP-моде к узлу PC-1. В окне Wireshark проанализируйте полученную информацию, дайте пояснения в отчёте. (см. рис. @fig-024).

UDP-соединение: Наблюдается активный двусторонний обмен UDP-пакетами между 192.168.1.11 и 192.168.1.12. Это указывает на то, что:
 
  •  Сетевая связность на уровне IP между устройствами присутствует.
 
  •  На одном из устройств (возможно, 192.168.1.11) запущено приложение, которое отправляет UDP-пакеты на порт 1234 узла 192.168.1.12.
 
  •  На узле 192.168.1.12 либо порт 1234 открыт и отвечает, либо запущено приложение, которое инициирует ответные UDP-пакеты.

![Сделала эхо запрос](image/2.4.jpg){#fig-024 width=70%}

5.Сделайте один эхо-запрос в TCP-моде к узлу PC-1. В окне Wireshark проанализируйте полученную информацию, дайте пояснения в отчёте. ([рис. @fig-025]).

Кадры 138-140 (Установление соединения): Происходит стандартное TCP трехстороннее рукопожатие. Клиент (192.168.1.11) отправляет пакет SYN (138), сервер (192.168.1.12) отвечает пакетом SYN, ACK (139), и клиент завершает рукопожатие пакетом ACK (140).

  •  Примечание: В кадре 138 Wireshark указывает на повторное использование порта (TCP Port numbers reused), что нормально для быстрых последовательных соединений.

Кадр 141 (Передача данных): После установления соединения клиент отправляет данные.
 
  •  Пакет имеет флаги PSH, ACK и содержит полезную нагрузку длиной Len=56 байт. Это и есть фактический "эхо-запрос" (например, минимальный HTTP-запрос). Флаг PSH (Push) указывает, что данные должны быть немедленно переданы приложению сервера.

Кадр 142 (Подтверждение данных): Сервер 192.168.1.12 немедленно подтверждает получение 56 байт данных от клиента, отправляя пакет ACK.

Кадры 143-144 (Закрытие соединения): Начинается процесс закрытия соединения (четырехстороннее рукопожатие).
 
  •  Клиент инициирует закрытие, отправляя пакет FIN, PSH, ACK (143).
 
  •  Сервер подтверждает получение FIN клиента пакетом ACK (144).

![Сделала эхо запрос](image/2.5.jpg){#fig-025 width=70%}

6.Остановите захват пакетов в Wireshark. ([рис. @fig-026]).

![Остановила захват пакетов](image/2.6.jpg){#fig-026 width=70%}

## Моделирование простейшей сети на базе маршрутизатора FRR в GNS3

1.Запустите GNS3 VM и GNS3. Создайте новый проект ([рис. @fig-031]).

![Запустила GNS](image/3.1.jpg){#fig-031 width=70%}

2.В рабочей области GNS3 разместите VPCS, коммутатор Ethernet и маршрути- затор FRR ([рис. @fig-032]).

![В рабочей области разместила ВПЦС](image/3.2.jpg){#fig-032 width=70%}

3.Измените отображаемые названия устройств. Коммутатору присвойте на- звание по принципу msk-user-sw-0x, маршрутизатору — по принципу msk- user-gw-0x, VPCS — по принципу PCx-user, где вместо user укажите имя вашей учётной записи, вместо x — порядковый номер устройства. ([рис. @fig-033]).

![Изменила отображаемые название устройств](image/3.3.jpg){#fig-033 width=70%}

4.Включите захват трафика на соединении между коммутатором и маршрути- затором. ([рис. @fig-034]).

![Включила захват трафик](image/3.4.jpg){#fig-034 width=70%}

5.Запустите все устройства проекта. Откройте консоль всех устройств проекта. ([рис. @fig-035]).

![Запустила все устройства проекта](image/3.5.jpg){#fig-035 width=70%}

6.Настройте IP-адресацию для интерфейса узла PC1:
ip 192.168.1.10/24 192.168.1.1
save show ip ([рис. @fig-036]).

![Настроила айпи адресацию](image/3.6.jpg){#fig-036 width=70%}

7.Настройте IP-адресацию для интерфейса локальной сети маршрутизатора ([рис. @fig-037]).

![Настроила адресацию](image/3.7.jpg){#fig-037 width=70%}

8.Проверьте конфигурацию маршрутизатора и настройки IP-адресации:
msk-user-gw-01# show running-config msk-user-gw-01# show interface brief ([рис. @fig-038]).

![Проверила конфигурацию](image/3.8.jpg){#fig-038 width=70%}

9.Проверьте подключение. Узел PC1 должен успешно отправлять эхо-запросы на адрес маршрутизатора 192.168.1.1. ([рис. @fig-039]).

![Проверила подключение](image/3.9.jpg){#fig-039 width=70%}

10.В окне Wireshark проанализируйте полученную информацию, дайте поясне- ния в отчёте. ([рис. @fig-310]).

•  ICMP (пинги): Узел 192.168.1.10 пингует узел 192.168.1.1. Каждый запрос пинга получает ответ. Это говорит об успешной доступности узла 192.168.1.1.

•  ARP: Соседство выяснилось, когда узел Private_66:68:00 пытается определить MAC-адрес для IP-адреса 192.168.1.1. Затем 0c:30:15:c7:00:00 отвечает своим MAC-адресом для 192.168.1.1, далее было выяснение MAC для 192.168.1.10, которое тоже было успешным.

•  ICMPv6: Многоадресные сообщения Listener Report Message v2.

Узел 192.168.1.10 успешно пингует 192.168.1.1, показывая сетевую связность. ARP-запросы используются для определения MAC-адресов.

![В окне проанализировала информацию](image/3.10.jpg){#fig-310 width=70%}

11.Остановите захват пакетов в Wireshark. Остановите все устройства в проекте. ([рис. @fig-311]).

![Остановила захват пакетов](image/3.11.jpg){#fig-311 width=70%}

## Моделирование простейшей сети на базе маршрутизатора VyOS в GNS3

1.Запустите GNS3 VM и GNS3. Создайте новый проект. ([рис. @fig-041]).

![Запустила и создала проект](image/4.1.jpg){#fig-041 width=70%}

2.В рабочей области GNS3 разместите VPCS, коммутатор Ethernet и маршрути- затор VyOS ([рис. @fig-042]).

![В рабочей области разместила ВПС](image/4.2.jpg){#fig-042 width=70%}

3.Измените отображаемые названия устройств. Коммутатору присвойте на- звание по принципу msk-user-sw-0x, маршрутизатору — по принципу msk- user-gw-0x, VPCS — по принципу PCx-user, где вместо user укажите имя вашей учётной записи, вместо x — порядковый номер устройства. ([рис. @fig-043]).

![Изменила отображаемые названия устройств](image/4.3.jpg){#fig-043 width=70%}

4.Включите захват трафика на соединении между коммутатором и маршрути- затором. ([рис. @fig-044]).

![Включила захват трафика](image/4.4.jpg){#fig-044 width=70%}

5.Запустите все устройства проекта. Откройте консоль всех устройств проекта. ([рис. @fig-045]).

![Запустила все устройства](image/4.5.jpg){#fig-045 width=70%}

6.Настройте IP-адресацию для интерфейса узла PC1:
ip 192.168.1.10/24 192.168.1.1
save show ip ([рис. @fig-046]).

![Настроила адресацию](image/4.6.jpg){#fig-046 width=70%}

7.Настройте маршрутизатор VyOS ([рис. @fig-047]).

![Настроила маршрутизацию](image/4.7.jpg){#fig-047 width=70%}

8.Проверьте подключение. Узел PC1 должен успешно отправлять эхо-запросы
на адрес маршрутизатора 192.168.1.1. ([рис. @fig-048]).

![Проверила подключение](image/4.8.jpg){#fig-048 width=70%}

9.В окне Wireshark проанализируйте полученную информацию, дайте поясне- ния в отчёте. ([рис. @fig-049]).

Разрешение MAC-адресов (ARP):

1. Кадры 1-2: До начала пингов, узел с MAC Private_66:68:00 (это 192.168.1.10) отправляет ARP-запрос для определения MAC-адреса 192.168.1.1. Узел 192.168.1.1 отвечает, сообщая свой MAC-адрес 0c:0f:66:bb:00:00.

2. Кадры 13-14: После серии пингов, узел 192.168.1.1 (MAC 0c:0f:66:bb:00:00) отправляет ARP-запрос для определения MAC-адреса 192.168.1.10. Узел 192.168.1.10 отвечает, сообщая свой MAC-адрес 00:50:79:66:68:00. (Примечание: Private_66:68:00 — это Wireshark-представление для 00:50:79:66:68:00).

Трафик показывает успешную сетевую связность между 192.168.1.10 и 192.168.1.1, подтвержденную успешными пингами. Протокол ARP был использован для динамического определения MAC-адресов обоих узлов.

![В окне проанализировала информацию](image/4.9.jpg){#fig-049 width=70%}

10.Остановите захват пакетов в Wireshark. Остановите все устройства в проекте. Завершите работу с GNS3. ([рис. @fig-410]).

![Остановила захват пакетов](image/4.10.jpg){#fig-410 width=70%}

# Выводы

В ходе выполнения лабораторной работы я построила простейшие модели сети на базе коммутатора и маршрутизаторов FRR и VyOS в GNS3, анализ трафика посредством Wireshark.

